# 输入失调电压(Input Offset Voltage) $V_{OS}$

输入失调电压的定义：强迫让运放输出电压为0V时，所施加在差动输入端的电压值（即正向输入端 — 反向输入端）。输入失调电压的电压范围一般是在$mV$~$uV$级。

输入失调电压可以被建模至运放内部。相当于一个理想电压源连接至理想运放输入端。

![image-20250521192028980](运放参数.assets/image-20250521192028980.png)改变Power Supply Voltage 电源供应电压和Common mode voltage 共模电压将会影响输入失调电压。 

运放内部的主要原理是模电中的差分放大电路。两个三极管Q1和Q2的不匹配会导致输入失调电压的产生。

![image-20250521192122012](运放参数.assets/image-20250521192122012.png)

## 输入失调电压造成的输出电压误差

![image-20250603114033037](运放参数.assets/image-20250603114033037.png)

# 输入偏置电流(Input Bias Current) $I_B$

输入偏置电流定义：流入运放输入端的电流。如图所示，这个电流可以被建模成一个理想电流源。

![image-20250521230748674](运放参数.assets/image-20250521230748674.png)

# 输入偏差(失调)电流(Input (bias) offset current)

输入偏差(失调)电流定义：如上图所示，运放正向输入端和反向输入端的两个输入偏置电流的差值。如果输入偏差电流很低，那它可以跟各个输入端的输入阻抗匹配，进而消除输入偏置电流所造成的电压偏压误差。

在BJT放大器里面，输入偏置电流是指分别流入BJT输入对的基极电流。一般而言，BJT放大器的偏置电流会大于MOSFET和JFET放大器，Typical(典型)值在几百个$nA$这个范围。在一些精准BJT放大器里，使用一种方法称为Bias Current Consolation，抵消偏置电流来达到偏置电流最小化。这个方法是做在运放芯片内部，不需要额外的外部器件。使用这个方法的运放可以使原本有数百个$nA$的偏置电流，降至数个$nA$。

# 输入偏置电流和输入偏差电流的总结

在MOSFET或JFET的运算放大器里面，ESD保护二极体的漏电流是造成输入偏置电流的主要因素。MOSFET栅极输入端拥有相当低的漏电流，所以它并不会产生很大的偏置电流。

![image-20250521233808682](运放参数.assets/image-20250521233808682.png)

虽然MOSFET和JFET的运放的输入偏置电流的25℃下一班在几十个$pA$的量级。但在MOSFET的运放下，没升高10℃，输入偏置电流会变为原来的两倍。

## 输入偏置电流造成的输出电压误差

![image-20250522000524162](运放参数.assets/image-20250522000524162.png)

![image-20250522000657216](运放参数.assets/image-20250522000657216.png)

![image-20250522000714414](运放参数.assets/image-20250522000714414.png)

# 输入输出限制(Input & Output Limitations)

使用一个运放组成的电压跟随器，常见这样的现象：

![image-20250524164519247](运放参数.assets\image-20250524164519247.png)

术语定义：

* 共模电压(Common Mode Voltage) $V_{CM}$：放大器两个输入端的平局电压。对于运放来说，它的两个输入端电平几乎是一样的，两者只相差一个很小的 Offset 输入失调电压值。所以在每一个输入端上都能看到这个共模信号。

  ![image-20250524164603865](运放参数.assets\image-20250524164603865.png)

* 共模输入电压范围(Input Voltage Swing)：又称输入电压摆幅。它定义了运放正常线性工作所需的输入共模电压范围。共模输入电压范围通常是相对于正电源和负电源而定义的。如果超过这个共模输入范围，输出信号会变成非线性。

* 输出电压摆幅(Output Voltage Swing)：是指输出信号线性工作时的输出电压范围。输出摆幅同样也是相对于供电电源而定义的。如果超过运放的输出电压摆幅参数指标，输出信号将会失真或者出现非线性。

  ![image-20250524165351297](运放参数.assets\image-20250524165351297.png)

  相对于电源定义的解释，如下图。

  ![image-20250524165712715](运放参数.assets\image-20250524165712715.png)

常见的**轨对轨运放指的是**共模输入电压范围可以达到供电电源的两个轨，并且输出电压接近供电电源轨的放大器。

## $V_{CM}$ TWO Examples

如下图所示，左侧为反相比例放大器，右侧为同相比例放大器。两者考虑输入共模电压这个参数时是不同的。

左侧的反相比例放大电路的同相端接地，为0V。则反相输入端的电压也约等于0V。所以这个电路的共模输入电压即为0V。并且不论输入信号如何变化，共模输入电压都是保持在0V不变的。

右侧的同相比例放大器输入信号接到同相输入端，这样一来共模信号就会收到输入信号钳制。换句话说，如果输入信号变化，共模信号也会随之变化使用这种配置时，一定要注意避免超过运放的共模电压限制。

![image-20250524170427425](运放参数.assets\image-20250524170427425.png)

# Input $V_{CM}$ or Output Voltage Problem?

## Example One

![image-20250526095830567](运放参数.assets\image-20250526095830567.png)

这个一个运算放大器搭建的Buffer缓冲器，正常情况下，我们会看到输出是0V，或者是一个很小的输出误差信号，这个信号是和输入失调电压$V_{OS}$相关的。但是如果我们做DC仿真，会发现输出端的电压值接近200mV，然而最大的失调电压值才是120uV。

根据共模输入电压范围和输出电压摆幅两个参数分别计算得到$-0.1V<V_{IN}<1.5V$，$0.2V<V_{OUT}<4.8V$。

由于我们的输入电压是0V，运放的输出端也将跟随到0V，但是这已经低于输入电压范围的最小值。因此这时输出电压只能达到接近0.2V的一个最小值，即仿真中得到的171mV。

## Example Two

![image-20250526100749920](运放参数.assets\image-20250526100749920.png)

![image-20250526100811990](运放参数.assets\image-20250526100811990.png)

# 带宽(BandWidth)

## [5.1 带宽 1_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV19Y4y1r7zg?spm_id_from=333.788.videopod.episodes&vd_source=0c6e9aa27976c7e534f51b25bcdd53f0&p=10)

* 认识增益(gain)

* 如何用线性或者是分贝来表示增益

* 零点(zeros)和极点(pulse)

  ![image-20250526115324204](运放参数.assets\image-20250526115324204.png)

* 波特图(Bode plots)

* 截止频率(Cutoff frequency)和带宽(BandWidth)的定义

## [5.2 带宽 2_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV19Y4y1r7zg?spm_id_from=333.788.videopod.episodes&vd_source=0c6e9aa27976c7e534f51b25bcdd53f0&p=11)

* 开环回路增益(open loop gain)

  ![image-20250526115135507](运放参数.assets\image-20250526115135507.png)

  方框中的最后一行的$A_{cl}$是常见的同相放大器闭环回路增益公式。需要注意的是，**这个公式仅适用于开环增益非常高时。**

  然而在现实世界中，运放的开环回路增益具有低频的主极点(dominnant pole)。如图所示可以被看作是一个RC filter滤波器。此仿真描绘了真实世界运放的开环回路增益。在直流或低频，$A_{ol}$是非常大的。在这种情况下它是120dB或100万V/V。随着频率的增加，$A_{ol}$以-20dB/dec的速率降低。在图中，我们看到在10MHz时，开环回路增益为0dB或1V/V。

  ![image-20250526135050644](运放参数.assets\image-20250526135050644.png)

* 闭环回路增益(closed loop gain)

  开环回路增益对闭环回路增益的影响：闭环回路增益在低频时为$1/\beta$，在高频时为$A_{ol}$。**我们定义电路的带宽为$1/\beta$和$A_{ol}$曲线相交的频率。**

  ![image-20250526140240241](运放参数.assets\image-20250526140240241.png)![image-20250526140637449](运放参数.assets\image-20250526140637449.png)

  然而，请注意X轴是对数的，因此以图形方式选定的带宽可能不够精确。

* 增益带宽积(gain bandwidth product)

  增益带宽积时线性增益和带宽的乘积，因此给定两个变数中的一个可以得到另外一个的解。计算过程可如下图左侧红色方框中的内容所示。（由此计算过程我认为增益带宽积是开环回路增益与带宽的乘积，须在开环回路增益满足-20dB/dec的下降区域内有效）请注意，计算出的带宽需当$A_{ol}$局限于-20dB/dec的速率下降才是有效的，虽然大部分的运算放大器都符合，但也有些特定的增益带宽积是有限的范围。

  ![image-20250526140929392](运放参数.assets\image-20250526140929392.png)

  此外，考虑到数据表有增益带宽积和$A_{ol}$曲线的典型值，通常可以预期该值在室温下的变异数高达$\pm30\%$。在规定的温度范围外，可能有附加$\pm30\%$误差的变化。因此，当考虑到放大器的放大带宽时，应在设计时保留设计裕度。

* 静态电流(Quiescent Current)与带宽(BandWidth)的关系

  在一般的情况下，较宽的带宽运算放大器需要较多的静态电流。原理如下图所示。观察双极型晶体管和MOSFET的转导(Transductions)(又叫电流增益)。可以看出基极(collector)和漏极(drain)电流的直接关系。转导取倒数可得阻抗或$r_{gm}$，$r_{gm}$是运放内部第一级的动态输出阻抗，此输出阻抗驱动米勒电容$C_c$，$r_{gm}$和$C_c$的串联组合形成一个低通滤波器。该低通滤波器的主机点产生放大器内部的带宽。图中第四个公式显示增加电流消耗直接增加双极型运算放大器的带宽。但是如果是MOSFET，带宽将依漏极电流平方根的比例增加。

  ![image-20250526144441433](运放参数.assets\image-20250526144441433.png)

* 仿真电路带宽并验证计算结果

## [5.3 带宽 3_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV19Y4y1r7zg?spm_id_from=333.788.player.switch&vd_source=0c6e9aa27976c7e534f51b25bcdd53f0&p=12)

* 主极点(低频极点)

  主极点是在$A_{ol}$图中当$A_{ol}$开始随频率下降的点。于发展macro模型时，此参数非常重要。极点频率可以从$A_{ol}$曲线来估计，但更准确的方法是使用增益带宽积及开环回路增益$A_{vol}$来计算。计算过程详见下图左下方框。需要说明的是，这个计算的思路是利用增益带宽积的定义计算开环回路增益最大时对应的频率，即可得到主极点的频率。
  
  ![image-20250527102256082](运放参数.assets\image-20250527102256082.png)
  
* 可变的增益带宽积

  ![image-20250527110610267](运放参数.assets\image-20250527110610267.png)

  需要注意的时当开环回路增益小于50时，增益带宽积不再为常数。当开环回路增益小于12时，相位裕度(Phase margin)小于-180°，系统不稳定，理论上会产生自激振荡。

* 使用同相增益(none inverting gain)来计算带宽

  如图所示，无论是同相比例放大电路还是反向比例放大电路。在计算带宽时所使用的增益的均定义为$gain=1+\frac{R_f}{R_1}$，这个增益$gain$是同相组态的增益，即同相增益，通常被称噪声增益(Noise gain) 。图中右上图显示了手算理论结果和仿真结果的吻合。**即计算运放的带宽时，应使用噪声增益$1+\frac{R_f}{R_1}$计算运放带宽。**

  **个人理解：使用增益带宽积计算带宽是利用增益带宽积为常数寻找$1/\beta$与$A_{ol}$曲线的交点即为带宽。完全是按照带宽的定义计算的。**

  ![image-20250527113427444](运放参数.assets\image-20250527113427444.png)

* **为何使用同相增益(none inverting gain)来计算带宽**

  根据同相组态和反向组态的控制框图可知对应的系统传递函数在时域的表达形式。可计算出同行组态和反向组态的增益如下图二所示。二者除前馈因子$\alpha$外形式相同，且$\alpha$为常数。故二者的增益表达式除$\alpha$外形式相同，均与变量$\beta$有关。由于$\frac{1}{\beta}=\frac{R_f}{R_1}+1$为同相增益。所以反相组态和同相组态的带宽均由同相增益来决定。

  ![image-20250527133814065](运放参数.assets\image-20250527133814065.png)![image-20250527162532969](运放参数.assets\image-20250527162532969.png)

* 高频极点的位置对带宽的二次效应

  将之前的仿真的运放进行更换。之前的仿真中是使用的是简化的单极点运算放大器模型，而本次仿真更换为实际的OPA827运放。Bandwidth的计算与之前相同，计算出反向放大器的带宽为11MHz，用于缓冲器的同行放大器带宽为22MHz。而当仿真电路时，带宽分别为18MHz和34.7MHz。原因是现实世界中的运算放大器和强大的仿真模型有多个极点。在他们的开环回路增益或$A_{ol}$曲线，我们已经讨论了一个低频极点的存在或主极点，其他极点通常被设计在元件的单位增益带宽之外，然而其他极点仍然会影响带宽。

  ![image-20250527164635966](运放参数.assets\image-20250527164635966.png)

  此页的左侧描述了$A_{ol}$和一个简化的仿真相位曲线。请注意，只有主极点出现在$A_{ol}$曲线。我们看到对应的相位图中，由于主极点产生了相应90°的相移。在更高的频率范围内，很明显的是没有额外的极点，因为相位曲线保持不变。相位只于极点频率的是被聘之前那开始改变。

  此页右侧我们看到$A_{ol}$和相位曲线更全面的双极点仿真模型。在此，我们看到在低频的主极点存在。着眼于相位曲线，我们看到一个相位于高频移动，这表示一个高频极点存在。请注意，即使极点的位置超出单位增益带宽，但它仍能影响元件的相位。

  ![image-20250527165450375](运放参数.assets\image-20250527165450375.png)

  在$A_{ol}$曲线的第二个极点，会影响运算放大器闭环回路相应的幅值和相位。实际上，有两个或多个极点的$A_{ol}$曲线放大器的闭环回路响应是由下图右下角的传递函数来求得的。其中$s=j\omega$，$\omega$是自然频率，$\zeta$是阻尼因数。使用对数图绘制二阶系统的幅值在不同$\zeta$下的增益与频率的关系，以dB为单位。请注意，当第二个极点的频率高于unit frequency，此时$\zeta$的值较大，并没有gain peaking 的影响。然而如果第二极点的频率接近unit gain frequency，此时$\zeta$的值小，并受gain peaking 的影响很大。gain peaking发生在现实世界中的运算放大器，并建立在大多数运算放大器模型中。当频率接近natural frequency，gain peaking将导致误差并会影响带宽。

  ![image-20250527171127268](运放参数.assets\image-20250527171127268.png)

  **闭环回路的带宽会随着第二极点频率的降低而增加。当第二极点接近单位增益带宽，闭环回路带宽停止变化，我们会看到显著的gain peaking。**值得一提的是 peaking effect只会发生于低增益。现在应注意的是运放第二极点的位置关系到可能出现gain peaking。此外这种影响通常是包含在SPICE运算放大器的macro-model中，该峰值的大小一般在几分贝，并且对带宽变化的影响应小于2倍。

  ![image-20250527172341411](运放参数.assets\image-20250527172341411.png)

  ![image-20250527172633073](运放参数.assets\image-20250527172633073.png)

## [5.4 带宽 4_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV19Y4y1r7zg?spm_id_from=333.788.videopod.episodes&vd_source=0c6e9aa27976c7e534f51b25bcdd53f0&p=13)

* $A_{ol}$曲线的斜率如何影响增益带宽

  * 增益带宽在不同闭环回路增益有些偏差是不常见的，而该偏差量将取决于放大器而异
  * 寻找一个零点或极点，相位曲线是关键。所以除了检查开环回路增益曲线，也要检查相位曲线。
  * 不要指望在数据表中列出带宽性能的确切性。应为典型带宽规格在不同的制程约有$\pm30\%$和不同温度下$\pm30\%$的变异。因此强烈建议在设计时对带宽要留显著的裕度。

  ![image-20250527232956708](运放参数.assets/image-20250527232956708.png)

* 为何运放的输入电容能够限制带宽

  所有运算放大器有差模和共模输入电容和阻抗，这种寄生电容是由于输入极晶体管的半导体界面造成的。差模电容之间连接到两个输入端，共模电容被连接在各输入相对于交流接地。表格中通常会显示输入电容。

  如下图所示的例子中，差模电容是1.6pF，共模电容是6.4pF。输入电容都比较小，所以这种情况下是不可能看到带宽的限制的，除非输入信号源具有大的串联电阻。在这个例子中，信号源电阻是比较大的1MΩ，原电阻和共模输入电容组成低通滤波器。对应的截止频率为24.87kHz。请注意，差模电容和反相输入端的共模电容未包括在带宽计算内。这是因为运算放大器的回授消除了这些电容。

  ![image-20250527234107871](运放参数.assets/image-20250527234107871.png)

  输入电容是TI的运算放大器模型的一部分，所以可以通过仿真得到结果。

  ![image-20250527234343579](运放参数.assets/image-20250527234343579.png)

* 如何计算放大器电路的实际增益和带宽

  计算方法

  ![image-20250529101943963](运放参数.assets/image-20250529101943963.png)

  **结论**：随着频率的增加，当接近截止频率时，闭回路增益减少。**所以如果需要设计一个在高频精确的增益，截至频率应相对增加。**

* 如何运用feedback capcitor来限制电路的带宽

  feedback capcitor回授电容在低频时可视为开路，在高频时可视为短路，从而限制运放带宽。此时运放带宽如下图红色方框所示。

  ![image-20250603110217661](运放参数.assets/image-20250603110217661.png)

* 了解slew rate即压摆率它是如何影响不同带宽的响应的

  运放的slew rate时输出信号的最大变化率。(**最大输出电压与频率的图表**)压摆率可以影响在不同频率下运算放大器的行为，此作用可以被误解为带宽限制。事实上最大输出电压与频率取决于slew rate。通常被称为全功率带宽。

  ![image-20250603111234203](运放参数.assets/image-20250603111234203.png)

# 压摆率

压摆率被定义为运放输出电压可以达到的最大摆动速率它以V/us为单位。测量压摆率时可以在运放的输入端加入一个较大的阶跃信号，比如1V幅值，然后测量输出端的电压摆动，即测量输出电平从最终输出量的10%增加到90%时的时间间隔。有些运放的数据手册中会专门给出压摆率指标，有些则用大信号的阶跃响应来代替。大信号的阶跃响应的压摆率计算方式如下图所示。

![image-20250603112011314](运放参数.assets/image-20250603112011314.png)

压摆率主要描述了与放在大信号输入时的响应指标，而在$\pm100mV$以下的小信号，我们应该使用小信号带宽这一指标。二者是不同的。

压摆率产生原因如下图所示

![image-20250603113148184](运放参数.assets/image-20250603113148184.png)

运放的全功率带宽描述了最大输出电压和频率的关系，下图显示了无压摆率失真时，在不同频率正弦波输入下的最大输出电压。

![image-20250603113025441](运放参数.assets/image-20250603113025441.png)

# 噪声

## [8.1 噪声 1_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV19Y4y1r7zg?spm_id_from=333.788.videopod.episodes&vd_source=0c6e9aa27976c7e534f51b25bcdd53f0&p=21)

外部噪声：由于外部电路或自然因素导致的噪声。

固有噪声：由电路元器件引起的，比如电阻和半导体器件都可以产生噪声。

电路设计时的固有噪声可以建模如下：![image-20250603124356238](运放参数.assets/image-20250603124356238.png)

其中内带星号的圆圈表示电压噪声源，内带型号的菱形表示电流噪声源。在运放的数据手册中已给出噪声源的幅值，电阻所对应的噪声可根据电阻的大小计算得到。我们很快就会学习如何综合这些噪声源来计算得到总的输出噪声。不过首先我们先学习一下噪声的常见分类。

### 噪声的常见分类：

1. White Noise (Broadband Noise)：白噪声（宽带噪声）。一般来说，宽带噪声是指从中频到高频的范围即大于1kHz的频率。之后我们会涉及低频噪声源。下图显示的是时域波形和统计分布图。下图中的右图显示的是一个统计分布图，这是一个高斯分布，平均值为$0V$，最大最小值约为$\pm40mV$。这个分不表示测量噪声接近$0V$的概率很高，而接近两边极值的概率相对比较低。之后我们会学习如何用这个分布来估计Peak to Peak Noise 峰峰值噪声。

   ![image-20250603124831294](运放参数.assets/image-20250603124831294.png)

2. Flicker Noise, 1/f Noise, Low Frequency Noise：闪烁噪声，1/f噪声，低频噪声。一般来说，1/f噪声是指处于低频范围，即频率小于1kHz的噪声。

   ![image-20250603125553707](运放参数.assets/image-20250603125553707.png)

3. Burst Noise (Popcorn Noise)：突发噪声（爆米花噪声）。爆米花噪声表现为电压或者电流的跳变。显然它不是高斯分布。实际上它是两个或者多个分布的叠加。示例中的分布是三个高斯曲线的相互叠加。爆米花噪声出现在低频，通常在0.1Hz~1kHz的范围内。之所以叫这个名字，是因为当用扬声器播放它的时候，听起来就像是爆米花在跳动。爆米花噪声是由于半导体材料中的细微缺陷导致的。但是我们无法用数学方法估计得到这个噪声。

   ![image-20250603130057296](运放参数.assets/image-20250603130057296.png)

一类噪声可以用很多同义词。下面列举部分同义词如下图。![image-20250603130235294](运放参数.assets/image-20250603130235294.png)

### **大多数噪声遵循高斯分布。我们可以用概率分布函数计算峰峰值噪声。** ![image-20250603130457704](运放参数.assets/image-20250603130457704.png)

根据概率分布函数我们可以知道，噪声出现在$\pm\sigma$之间内的概率为$68.3\%$，而在$\pm3\sigma$之间的概率为$99.7\%$。我们在估计峰峰值噪声时通常用$6\sigma$或$6.6\sigma$。

![image-20250603133317497](运放参数.assets/image-20250603133317497.png)

如果对噪声分析比较熟悉，可能会见到有些地方将标准差和RMS值（有效值）交替使用。那么这两个值真的是相等的吗？

![image-20250603133617786](运放参数.assets/image-20250603133617786.png)

答案是这两个值并不一定总是相等。实际上只有在没有DC成分的情况下才是相等的。对于大部分的噪声而言，这两个值是相等的。

幸运的是，运放噪声和电阻噪声都不含DC成分。所以这种情况下，我们认为RMS和标准差是相等的。一些外部噪声，例如数字转换噪声可能不是对称的，即会包含一个DC成分。值得注意的是，一些仪器或测试设备在显示RMS噪声时会包含DC成分，而另一些设备显示的RMS则不包含DC成分只有AC成分。

**噪声的叠加方式要采用类似向量叠加的方式**。这种计算方式只适用于不相关的随机噪声信号。如果噪声源是相关的，要使用另一种计算方式。

![image-20250603134259695](运放参数.assets/image-20250603134259695.png)

### 噪声频谱密度曲线

正如白光是由各种频率的光混合得到的一样，白噪声也是由各种频率的噪声组成的。如图中所示，如果将几个不频率的信号在时域上叠加在一起。可以得到一个随机信号。在频域中，每一个信号看起来就像是一个脉冲信号。将无数个这样不同频率的信号叠加在一起，就可以得到Nosie spectral density curve 噪声频谱密度曲线。

对于不太熟悉噪声分析的工程师来说，Voltage noise spectral density 电压噪声频谱密度常常是一个比较令人困惑的参数。频谱密度的单位是$nV/\sqrt{Hz}$。如右上角的方程式所示，将频谱密度和每平方根噪声带宽相乘，便可以得到RMS噪声。你可以看到平方根赫兹是如何相消的。对于运放的噪声来说，频谱密度曲线是一个主要的参数。在之后我们会讲解如何使用频谱密度曲线计算噪声。

![image-20250603135435356](运放参数.assets/image-20250603135435356.png)

### 电阻热噪声计算

如何计算电阻内部电荷的随机游动引起的噪声？

![image-20250603135935950](运放参数.assets/image-20250603135935950.png)

#### 理论基础

电阻热噪声（约翰逊-奈奎斯特噪声）由电子热运动产生，其**电压噪声功率谱密度**（单边谱）为：
$
S_v(f) = 4k_B T R \quad \text{(单位: } \mathrm{V^2/Hz)}
$
其中：

- \(k_B\)：玻尔兹曼常数（\(1.380649 \times 10^{-23}  \mathrm{J/K}\)）
- \(T\)：绝对温度（单位：开尔文，K）
- \(R\)：电阻值（单位：欧姆，Ω）

对应的**电压噪声频谱密度**（幅度谱）为：
$
e_n = \sqrt{S_v(f)} = \sqrt{4k_B T R} \quad \text{(单位: } \mathrm{V/\sqrt{Hz})}
$

---

#### 示例计算
**假设条件**：
- 电阻 \(R = 1  \mathrm{k\Omega} = 1000  \Omega\)
- 温度 \(T = 300  \mathrm{K}\)（室温 27°C）

##### 步骤 1：计算电压噪声功率谱密度 \(S_v(f)\)
$
S_v(f) = 4 \times (1.380649 \times 10^{-23}) \times 300 \times 1000
$

**结果**：
$
\boxed{S_v(f) \approx 1.66 \times 10^{-17}  \mathrm{V^2/Hz}}
$

##### 步骤 2：计算电压噪声频谱密度 \(e_n\)
$
e_n = \sqrt{S_v(f)} = \sqrt{1.66 \times 10^{-17}}
$

**结果**：
$
\boxed{e_n \approx 4.07  \mathrm{nV}/\sqrt{\mathrm{Hz}}}
$

**实际噪声电压计算**：
若系统带宽为 \(B\)（单位：Hz），总噪声电压（RMS）为：
$
v_{n,\mathrm{rms}} = e_n \times \sqrt{B} = \sqrt{4k_B T R B}
$
**示例**：当 $B = 1\mathrm{MHz}= 10^6\mathrm{Hz}$ 时：
$
v_{n,\mathrm{rms}} = 4.07 \times 10^{-9} \times \sqrt{10^6} = 4.07  \mathrm{\mu V}
$

### 比较运放和电阻的电压噪声频谱密度

通常，运放的噪声参数一般是以频谱密度的方式给出的。计算一个电阻的噪声频谱密度很重要。

有了它就很容易比较电阻产生的噪声和由运放产生的噪声。低噪声的运算放大器，它的固有噪声可以低到$1nV/\sqrt{Hz}$。如果将其与这里的图比较，$1nV/\sqrt{Hz}$对应的电阻值大约是$70\Omega$，因此在这个例子中，应该使用等于或小于$70\Omega$的电阻，为了得到更好的性能，我们一般建议放大器产生的噪声要比电阻产生的噪声大。

![image-20250603142550548](运放参数.assets/image-20250603142550548.png)

### 运放噪声模型

![image-20250603143057276](运放参数.assets/image-20250603143057276.png)

## [8.2 噪声 2_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV19Y4y1r7zg?spm_id_from=333.788.player.switch&vd_source=0c6e9aa27976c7e534f51b25bcdd53f0&p=22)

### 如何将噪声频谱密度转换成RMS噪声

噪声的分析需要考虑运放的电压噪声源、电流噪声源、电阻噪声源。运放的增益和带宽限制也会影响总噪声计算的结果。

![image-20250603143327359](运放参数.assets/image-20250603143327359.png)

### 电压噪声源的噪声增益 Noise gain

噪声增益是指运放电路对于总的输入端噪声的增益，输入端噪声源模型被放置在运放的同相输入端，噪声增益在某些情况下并不等于信号增益。比如下图的例子，相对于信号源来说，这个电路是反相输入的配置，而相对于噪声电压源来说，这是一个同相输入运放。

![image-20250603143618299](运放参数.assets/image-20250603143618299.png)

### 将电压频谱密度转换成RMS电压再进一步转换成峰峰值的一般过程

![image-20250603144035600](运放参数.assets/image-20250603144035600.png)

### 对功率频谱积分而不是对电压频谱积分

![image-20250603144959895](运放参数.assets/image-20250603144959895.png)

频谱密度曲线有两个区域：1/f区域和宽带区域。1/f噪声发生在低频区域，对于其电压和电流频谱密度来说，其斜率都是$1/\sqrt{f}$。由于功率频谱密度是电压频谱密度的平方，所以功率频谱密度的斜率即为$1/f$。这也是我们把这个区域叫做1/f区域的原因。宽带噪声则有一个平坦的频谱密度。

![image-20250603145911336](运放参数.assets/image-20250603145911336.png)

计算总噪声需要将两个区域的噪声平方加和开根号。

![image-20250603150111660](运放参数.assets/image-20250603150111660.png)

由于电路自带的带宽限制，现实生活中系统的噪声带宽都有一个低通滤波响应。图中上图的绿色部分所显示的就是低通响应。我们将其等效为一个长方形的低通滤波器，并加到频带响应即蓝色区域，这个长方形的区域我们称其为brick wall filter 矩形滤波器。其面积和上面绿色区域所代表的低通滤波器是相等的。它能使所有低于截至频率的信号无损通过，同时所有高于截至频率的信号则被无限衰减。从而在幅频特性曲线上呈现矩形，因此得名矩形滤波器。通过这样一个等效，我们可以很容易的进行积分。注意到右边计算噪声带宽的式子中包含积分。一般来说这个式子只需要用一次。根据它，我们可以计算不同阶数的过滤器所对应的修正常数。通过这个式子，计算得到，一阶过滤器对应的修正系数是1.57。

![image-20250603150406168](运放参数.assets/image-20250603150406168.png)

其他阶数的过滤器对应的噪声带宽如下图所示。将-3dB带宽乘以修正系数$K_n$，便可以得到噪声带宽。注意到，随着极点个数的增加，修正系数越来越接近1。原因是高阶滤波器曲线下降的速度更快。同时还要注意的是增益峰值也会影响噪声带宽，所以实际电路中真实的噪声带宽还会不一样。

![image-20250603152447657](运放参数.assets/image-20250603152447657.png)

### 运放噪声频谱密度到RMS噪声的转换计算

#### 宽带噪声RMS值计算

![image-20250603153052469](运放参数.assets/image-20250603153052469.png)

#### 1/f噪声RMS值计算

![image-20250603155247849](运放参数.assets/image-20250603155247849.png)

## [8.3 噪声 3_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV19Y4y1r7zg?spm_id_from=333.788.videopod.episodes&vd_source=0c6e9aa27976c7e534f51b25bcdd53f0&p=23)

高静态电流往往伴随着低电压噪声指标。同样静态电流下，Bipolar结构的运放电压噪声往往都会比CMOS结构的要低一些。即使CMOS运放的静态电流高一些，Bipolar运放仍然具有更低一些的电压噪声性能。对于电流噪声，则和电压噪声有所不同，它与静态电流无关。CMOS运放的电流噪声一般都比Bipolar的要低。一般来说，bias current 偏置电流比较低的运放总是具有较低的电流噪声。从这个表格中，我们也可以看到不同运放的噪声水平。

![image-20250603155519060](运放参数.assets/image-20250603155519060.png)

### 噪声计算示例

![image-20250603160722257](运放参数.assets/image-20250603160722257.png)

#### 电压噪声源噪声计算

![image-20250603160338866](运放参数.assets/image-20250603160338866.png)

![image-20250603160354467](运放参数.assets/image-20250603160354467.png)

#### 电流噪声源计算

![image-20250603161156414](运放参数.assets/image-20250603161156414.png)

![image-20250603161304808](运放参数.assets/image-20250603161304808.png)

#### 电阻噪声源计算公式

![image-20250603161457324](运放参数.assets/image-20250603161457324.png)

#### 电压、电流、电阻噪声和的计算

![image-20250603161601367](运放参数.assets/image-20250603161601367.png)

**我们将总的RMS噪声乘以6或6.6就可以估计得到峰峰值噪声。**

## [8.4 噪声 4_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV19Y4y1r7zg?spm_id_from=333.788.videopod.episodes&vd_source=0c6e9aa27976c7e534f51b25bcdd53f0&p=24)

简化噪声分析的经验方法，判断噪声的主要来源。

1. 比较不同噪声源的大小。RMS值3倍的为很大的，需要改善。而1/3以下则往往被忽略

2. 使电阻噪声比运放固有噪声低很多。降低电阻值唯一的顾虑是它会导致功耗增加，设计一个低噪声同时又低功耗的方案是很大的挑战。

3. 确定哪个是主要噪声源。电压噪声源 or 电流噪声源。

   大多是情况下，对于CMOS和JFET运放来说，电流噪声都不明显。多数CMOS运放电流噪声在$fA/\sqrt{Hz}$级别，Bipolar运放电流噪声则在$pA/\sqrt{Hz}$级别。**当输入电阻或反馈回路的元器件非常大(100kohm以上)时，电流噪声则需要重点考虑。**采用100kohm以上的大电阻时，可能需要使用CMOS或JFET运放。**另一方面，如果电阻值非常小(1kohm以下)，电流噪声常常都是可以忽略的。**比如对于小于1kohm的电阻来说，即使使用的时bipolar运放，电流噪声一般也可以忽略。

4. 系统带宽比1/f噪声的拐点频率大10倍以上，1/f噪声便可以忽略不计。对于大多数精密运放，噪声拐点频率在1Hz到1kHz之间，因此对于带宽大于10kHz的系统，几乎可以不考虑1/f噪声的影响。

   ![image-20250603165733100](运放参数.assets/image-20250603165733100.png)

5. 第一级常常是主导的噪声源。第一级采用最高的增益，使用昂贵的高精密运放。