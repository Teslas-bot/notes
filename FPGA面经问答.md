# 2025届华为实习逻辑岗一面面经

[2025届华为实习逻辑岗一面面经_华为逻辑岗-CSDN博客](https://blog.csdn.net/clear_lqy/article/details/138852201)

Q1：eth_udp_rx_gmii模块接受到的是什么内容？怎么将行像素数据提取出来？缓存的是报文数据还是mac帧；

Q2：以太网有几层？各个层的功能是什么？

![img](https://i-blog.csdnimg.cn/blog_migrate/3578eb1e998556c62755b613010bd263.png)

1.应用层：

应用层是网络服务与最终用户的接口。该层的主要功能是直接向用户提供服务，完成用户希望在网络上完成的各种工作。该层的各种应用程序协议有HTTP(超文本传输协议）、FTP（文本传输协议）、TFTP（简单文本传输协议）、SMTP（简单邮件传输协议）、SNMP（简单网络管理协议）、DNS（域名系统）、TELNET(远程终端协议）、HTTPS（超文本传输安全协议）、POP(邮局协议版本3）、DHCP（动态主机配置协议）。

2.表示层：

表示层是对来自应用层的命令和数据进行解释，对各种语法赋予相应的含义，并按照一定的格式传送给会话层。该层的主要功能是数据格式的处理，协商和建立数据交换的格式，解决个应用程序之间的再数据格式表示上的差异；数据的编码，处理字符集和数字的转换；压缩和解压缩，减少数据的传输量；数据的加密和解密，提高网络的安全性。压缩解压格式有JPEG、ASCII、EBCDIC等。

3.会话层：

会话层负责建立、管理和终止表示层实体之间的通信会话。该层的具体功能有会话管理，允许用户在两个实体设备之间建立、维持和终止会话，并支持它们之间的数据交换；会话流量控制，提供会话流量控制和交叉会话功能；寻址，使用远程地址建立会话连接；出错控制，接收来自传输层的数据，并负责纠正错误。会话层的安全协议有SSL（安全套接字层协议）、TLS（安全传输层协议）。

4.传输层：

传输层提供建立、维护、拆除传输连接功能，起到承上启下的作用。该层具体功能有向用户提供可靠的端到端的差错和流量控制，**保证报文的正确传输，同时向高层屏蔽下层数据通信的细节，即向用户透明地传送报文。**传输层的协议有TCP、UDP。

5.网络层：

**网络层进行逻辑地址寻址，实现不同网路之间的路径选择，控制子网的运行。网络层的具体功能是数据链路层的数据在这一层被转换为数据包，然后通过路径选择、分段组合、顺序、进/出路由等控制，将信息从一个网络设备传送到另一个网络设备。**网络层的协议有ICMP（互联网控制信息协议）、IGMP(组管理协议）、IP(IPV4、IPV6）（互联网协议）、安全协议、路由协议等。

路由器

路由（routing）是指分组从源到目的地时，决定端到端路径的网络范围的进程 。路由工作在网络层的数据包转发设备。路由器通过转发数据包来实现网络互连。在我国绝大多数路由器运行TCP/IP协议。路由器通常连接两个或多个由IP子网或点到点协议标识的逻辑端口，至少拥有1个物理端口。路由器根据收到数据包中的网络层地址以及路由器内部维护的路由表决定输出端口以及下一跳地址，并且重写链路层数据包头实现转发数据包。

6.数据链路层：

数据链路层建立逻辑连接、硬件地址寻址、差错校验，将比特组合成字节进而组合成帧，使用链路层地址（以太网使用MAC地址）来访问介质，并进行差错检测。数据链路层的地址解析协议：ARP、PARP（反向地址转换协议）。

以太网交换机

以太网交换机是基于以太网传输数据的交换机，以太网采用共享总线型传输媒体方式的局域网。以太网交换机的结构是每个端口都直接与主机相连，并且一般都工作在全双工方式。交换机能同时连通许多对端口，使每一对相互通信的主机都能像独占通信媒体那样，进行无冲突地传输数据。

交换机在端口上接受计算机发送过来的数据帧，根据帧头的目的MAC地址查找MAC地址表然后将该数据帧从对应端口上转发出去，从而实现数据交换。

7.物理层：

物理层建立、维护、断开物理连接，在设备之间传输比特流，规定了电平、速度和电缆针脚。**物理层的主要功能是利用传输介质为数据链路层提供物理连接，实现比特流的透明传输。**

Q3：PC和FPGA板是怎么连接的？

RJ45网线连接

Q4：在哪里解帧？

Q5：gmii/rgmii是物理层和数据链路层(mac层)的接口协议

**✅ GMII（Gigabit Media Independent Interface）**

- **速率** ：支持 10/100/1000 Mbps 以太网。
- 数据宽度 ：
  - 发送（TX）：8 位并行数据（TXD[7:0]）
  - 接收（RX）：8 位并行数据（RXD[7:0]）
- 时钟频率 ：
  - 1000 Mbps 模式：125 MHz
  - 100 Mbps 模式：25 MHz
  - 10 Mbps 模式：2.5 MHz
- **信号线数量** ：约 24 根（包括数据、控制、时钟等），引脚较多，占用 PCB 面积大。
- **应用场景** ：早期千兆以太网设计，对引脚资源不敏感的场合。

**✅ RGMII（Reduced GMII）**

- **目的** ：减少 GMII 的引脚数量，适用于高密度 PCB 设计。
- **数据宽度** ：4 位并行数据（TXD[3:0], RXD[3:0]）
- 时钟机制 ：
  - 使用 **双沿采样** （DDR，Double Data Rate）：在时钟的上升沿和下降沿都传输数据。
  - 例如，在 125 MHz 时钟下，实现 250 Mbps 的有效数据速率，两倍后达到 1000 Mbps。
- **信号线数量** ：约 12 根，显著减少。
- 时钟频率 ：
  - 1000 Mbps：125 MHz（DDR）
  - 100 Mbps：25 MHz（DDR）
  - 10 Mbps：2.5 MHz（DDR）
- **应用场景** ：现代 FPGA、SoC、嵌入式系统中广泛使用。

Q6：物理层负责串并转换，解扰码

Q7：以太网网的突发？

以太网的“突发”（Burst）通常指的是**突发传输模式** （Burst Transmission），也称为**突发数据传输** 或**突发模式以太网** （Ethernet Burst Mode），是一种在短时间内连续发送多个数据帧的传输方式，目的是提高网络带宽的利用率和传输效率。

Q8：带宽？千兆1000M

Q9:FPGA的选型？怎么考虑项目所需要的逻辑资源？

1.FPGA厂商的选择

2.芯片系列的选择

3.芯片资源：逻辑单元、DSP、BRAM、I/O等数量、LUT、GT高速收发器、PLL锁相环、片上晶振；

在选型时，因为FPGA设计还未开始，很难确定FPGA器件的规模。通常的做法是，针对本次设计中想要用的FPGA器件系列，重新编译之前的某些功能模块，以便获得一个大致正确的规模估计。如果设计中使用了IP，这些IP核也需要编译后，加入到总面积估算中。再将需要加入的新功能进行设计估算。两方面加起来后，在此基础上预估再增加20%-30%，基本上可以满足之后的设计需求。甚至有时，现有的嵌入式逻辑分析仪也需要耗费内部存储模块，调试过程的资源消耗可能也需要考虑在内。若FPGA留有余量：避免时序收敛对设计的影响，减少开发周期，快速进入板上调试阶段；则对设计后期修改或产品版本更新所增加的逻辑单元，就能比较容易的被接纳；设计在FPGA上正常运行后，如果FPGA上有大量未使用的资源，此时可以考虑换区一个比较小的器件以降低成本，这时候要注意的就是引脚在移植代码时的修改问题。

4.封装信息：第一个就是可用的I/O口的数量。第二个就是封装的尺寸。I/O数量是一个必要的条件，先要根据这个条件筛选出可以用的芯片。然后在筛选出来的芯片中，再根据封装类型，尺寸和pitch尺寸选择合适的芯片。在封装尺寸符合要求的情况下，尽量选择有利于PCB设计和生产的封装。

5.运算速度：芯片的速度等级取决于芯片内部的门延时和线延时，这两个因素与晶体管的长度L和容值C有关，但最终取决于芯片的生产工艺。芯片的速度等级不是专门设计出来的，而是在芯片生产出来后，通过实际测试标定出来的；速度快的芯片在芯片总产量中的比率很低，所以一般价格也就相应地高。

6.功耗

7.成本

8.Eda工具的使用，以及厂家的技术支持包括ip核资源；

Q10：如果有异步时钟怎么处理？

A：无法判定两个时钟间相位时，则可以称这两个时钟为异步时钟；

在不同的时钟信号下，两个模块之间进行数据传输，为了确保系统的稳定性和正确性，需要进行跨时钟域同步处理；

常见方法：

单bit：两级触发器同步，只适用于慢到快；如果是快到慢，会相对复杂；

多bit：采用异步fifo，异步双口ram；增加握手信号；格雷码转化；

Q11：前段有没有考虑静态时序

Q12：静态时序分析要满足哪些时序要求？

Q13：怎么通过STA将时钟速率跑上去？

A11, A12, A13: 静态时序分析应满足建立时间和保持时间均有足够的裕度。**建立时间在数据最大延迟的条件下分析，保持时间在时钟最小延迟的条件下分析。**

**1. 建立时间违例怎么修？**

“比如两个触发器之间逻辑太复杂，信号来不及传到。解决方法可以：

1. 减小组合逻辑延时：简化逻辑（比如合并逻辑门，关键逻辑串行转并行，流水线设计将复杂组合逻辑分割成多级简单的组合逻辑）；
3. 增加时钟偏斜：（给信号更多时间）。”
3. 增大时钟周期：降低时钟频率

**2. 保持时间违例怎么修？**

“比如两个触发器之间逻辑太简单，信号太快传到。解决方法可以：

1. 增加组合逻辑延时：插缓冲器加延迟（让数据慢一点到）；
2. 减小时钟偏斜：（让接收端时钟早一点来）；

Q14：什么是竞争冒险？怎么解决？

A: **什么是竞争冒险？**在组合逻辑中，多个信号同时变化，但因路径延迟不同，到达逻辑门的时间不一致，导致输出出现非预期的瞬时错误。**怎么解决？** **使用D触发器同步化（推荐FPGA设计）**。将组合逻辑的输出通过一个触发器打一拍（寄存），在时钟边沿采样。

Q15：pll故障：失锁？什么造成的？会是什么现象?
A: 当环路已处于锁定状态时，如果输入参考信号的频率和相位发生变化，通过环路的控制作用，压控振荡器的频率和相位能不断跟踪输入参考信号频率的变化而变化，使环路重新进入锁定状态，这种动态过程称为环路的“跟踪”过程。

**而环路不处于锁定和跟踪状态，这个动态过程称为“失锁”过程。**

**什么造成的？**1.当参考信号和被测信号的频率差大于捕获范围时（频率偏差过大）；2.PLL输入时钟抖动超过规范。（将缓冲控制电压作为电源电压可以减小抖动）3.同步开关噪声（SSN）过大4.电源噪声：在VCCA上的过大的噪声可以引起高输出抖动，并引起失锁。5.PLL的输入时钟突然停止或有毛刺

**会是什么现象?** PLL不可以捕获并锁定被测信号的频率和相位。
[华为校招硬件工程师 逻辑岗位（FPGA）超详细面经！！！_牛客网](https://www.nowcoder.com/discuss/353157344945184768)

Q1：Verilog实现二分频

```verilog
module two_frequency (
	input sys_clk,
    input rst_n,
    
    output clk
);
    reg cnt;
    
    always @(posedge sys_clk or negedge rst_n) begin
        if (~rst_n) begin
            cnt <= 1'b0;
        end else begin
            cnt <= cnt + 1'b1;
        end
    end
    
    assign clk = cnt ? 1'b1 : 1'b0;
```



Q：**亚稳态的现象和成因，如何避免**

A：亚稳态是指触发器（Flip-Flop）在时钟边沿采样输入信号时，由于输入信号在建立时间（setup time）或保持时间（hold time）内发生变化，导致输出进入一个既非“0”也非“1”的中间状态，并可能持续一段时间后才稳定到某一逻辑电平。

**亚稳态的成因**

1. 异步信号跨时钟域（Clock Domain Crossing, CDC）
   当一个信号从一个时钟域传递到另一个频率不同或相位无关的时钟域时，采样边沿可能恰好落在信号变化的窗口内，违反触发器的建立/保持时间要求。
2. 建立时间（Setup Time）和保持时间（Hold Time）违规
   - 建立时间：数据必须在时钟上升沿之前稳定的时间；
   - 保持时间：数据必须在时钟上升沿之后保持稳定的时间； 若信号在这两个时间窗口内发生变化，触发器可能进入亚稳态。
3. 外部输入信号未同步
   来自按钮、传感器或外部设备的异步信号若直接接入同步电路，容易在任意时刻变化，导致采样风险。
4. 时钟偏移（Clock Skew）或抖动（Jitter）
   时钟信号在不同路径上的延迟差异可能缩小有效建立/保持时间窗口，增加亚稳态概率。

**主要对策**

多级同步器、异步FIFO、格雷码、握手协议

Q：打两拍能保证亚稳态被纠正到原来正确的位置吗？

A：**🚫 常见误解：**

> “打两拍是为了让亚稳态‘恢复’到正确的逻辑值。” 

**这是错误的。**
“打两拍”的目的**不是恢复原始值** ，而是：

> **给第一级触发器足够的时间从亚稳态中恢复，避免其不稳定输出被第二级采样并传播到系统其他部分。** 

**结论：打两拍不能“恢复”正确值，但保障了系统稳定**

| 问题                             | 回答                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| 打两拍能保证恢复到原始正确值吗？ | ❌ 不能。亚稳态恢复是随机的，可能稳定为 0 或 1。              |
| 那为什么还要打两拍？             | ✅ 为了让亚稳态在传播前有时间衰减，避免系统崩溃。             |
| 最终结果是“错误”的吗？           | ⚠️ 不一定。即使稳定为“错误”值，也只相当于采样延迟一个周期，对电平信号通常可接受。 |
| 什么情况下会真正出错？           | 当信号是窄脉冲且被打两拍漏掉，或系统对时序极其敏感。         |

**如何进一步提高可靠性？**

1. **对脉冲信号** ：使用脉宽展宽或 toggle 同步器；
2. **对多比特信号** ：使用异步 FIFO + 格雷码；
3. **对高可靠性系统** ：使用三级同步器，进一步提升 MTBF；
4. **避免采样组合逻辑输出** ：防止毛刺引入额外不确定性。

Q：**有关通信协议的设计思路**

A：根据时序图和帧格式定制状态机。使用计数器定制状态机。对于同步协议，常根据同步时钟的数量划分状态机的不同状态。对于异步协议，常根据模块的工作时钟的数量结合波特计数器的数量划分状态机的不同状态。根据状态机的不同状态，结合每个状态中的bit计数器，定制输出。

**以I2C通讯协议为例**

[IIC通讯协议详解（电路和时序图）_iic通信协议-CSDN博客](https://blog.csdn.net/weixin_44115575/article/details/136713792)

**时序：**

![img](https://i-blog.csdnimg.cn/blog_migrate/301650f4d15e24b923cee8029682d1a5.png)

![img](https://i-blog.csdnimg.cn/blog_migrate/7e41055ef39d50b8136305fd7adc1596.png)

开始阶段：SCL为高，SDA下降沿

发送阶段：SCL高电平时，SDA数据有效

结束阶段：SCL高电平时，SDA上升沿	

**帧格式：**

- **主设备写入从设备**：
  ```
  [START]→[地址+写位]→ACK→[数据1]→ACK→[数据2]→ACK→...→[STOP]
  ```
- **主设备读取从设备**：
  ```
  [START]→[地址+读位]→ACK→[数据1]→ACK→[数据2]→NACK→[STOP]
  ```

**传输速率**

- 标准模式：100 kbps
- 快速模式：400 kbps
- 高速模式：3.4 Mbps

**多主多从**

**以SPI通信协议为例**

[ SPI总线协议及SPI时序图详解 - 知乎](https://zhuanlan.zhihu.com/p/146053309)

[spi总线协议及spi时序图详解_奔创spi-腾讯云开发者社区-腾讯云](https://cloud.tencent.com/developer/article/2153830)

**时序：**

![img](https://ask.qcloudimg.com/http-save/yehe-8223537/cf030851bf471df059d3ac51cc2d49ba.png)

读命令阶段：CLK按照方波正常进行8个周期，DI发送读命令对应的8位命令。以Mode0为例，DI在CLK的上跳沿保持不变，在CLK的下跳沿变化。

24位地址阶段：CLK按照方波正常进行24个周期，DI发送读命令对应的24位地址。以Mode0为例，DI在CLK的上跳沿保持不变，在CLK的下跳沿变化。

接收数据极端：CLK按照方波正常进行8个周期，DI发送dummy byte，以产生CLK。同时在CLK上跳沿对DO数据进行采样。

SPI接口在内部硬件实际上是两个简单的移位寄存器,传输的数据为8位，在主器件产生的从器件使能信号和移位脉冲下，按位传输，高位在前，低位在后。如下图所示，在SCLK的下降沿上数据改变，上升沿一位数据被存入移位寄存器。

![img](https://pic3.zhimg.com/v2-d89e55941b972358daf282c0017ba01a_1440w.jpg)


SPI接口没有指定的流控制，没有应答机制确认是否接收到数据

**帧格式：**

SPI 本身 **没有标准的帧格式** ，其“帧”通常由应用层定义。但一般遵循以下结构：

**1. 基本传输单位：8 位或 16 位字节**

- 每次传输通常是 8 位（1 字节），也可配置为 16 位等。
- 数据从 **最高位（MSB）** 开始传输（也可配置为 LSB 优先）。

**2. 典型帧结构（以读取寄存器为例）**

假设主设备读取从设备的某个寄存器：

| 阶段 | MOSI（主->从）      | MISO（从->主） | 说明                     |
| ---- | ------------------- | -------------- | ------------------------ |
| 1    | [写命令/寄存器地址] | 忽略           | 主发送地址               |
| 2    | 虚拟字节（dummy）   | 实际数据       | 主继续发时钟，从返回数据 |

> 因为 SPI 是全双工，**每次发送一个字节，同时接收一个字节** 。所以即使只读数据，主设备也要发送“dummy byte”来产生时钟。 

Q：**异步FIFO设计思路**

**详见“Qwen3”或"Verilog异步FIFO设计.md"**

**基本原理**

异步FIFO用于在不同时钟域之间传递数据，核心思想是：
- 使用双端口RAM存储数据
- 读写指针在各自时钟域中独立操作
- 通过格雷码转换避免跨时钟域亚稳态问题
- 利用同步器实现指针跨时钟域传递

**架构组成**

```
┌─────────────┐    ┌─────────────┐
│  写时钟域   │    │  读时钟域   │
│  ┌───────┐  │    │  ┌───────┐  │
│  │写指针 │  │    │  │读指针 │  │
│  └───────┘  │    │  └───────┘  │
│     │       │    │     │       │
│   格雷码     │    │   格雷码     │
└─────┼───────┘    └─────┼───────┘
      │                  │
   同步器              同步器
      │                  │
      └───────┬──────────┘
              │
        ┌─────┴─────┐
        │  状态判断  │
        └───────────┘
```

**设计要点**

**1 指针位宽设计**

- 实际深度为2^n，但需要额外1位区分满/空状态
- 读写指针使用n+1位
- 格雷码也使用n+1位

**2 跨时钟域处理**

- 使用格雷码减少多位切换时的竞争
- 两级同步器消除亚稳态
- 比较时使用格雷码高位扩展

**3 满/空判断逻辑**

- 空：读写指针完全相等
- 满：读写指针除最高位外都相等，最高位相反

**注意事项**

1. **时钟域隔离**：确保读写逻辑完全独立
2. **亚稳态处理**：必须使用同步器
3. **格雷码优势**：单次只有一位变化
4. **复位同步**：考虑异步复位的同步释放（对复位信号也在两个时钟域分别打两拍，对应时钟域使用对应打两拍后的同步信号）

**关于可能出现错误的问题：**
1.快写慢读(写指针变化快，读指针变化慢)
写满标志：写满信号在快时钟域下发挥作用，因此将读指针同步到快时钟域，一般不会出现问（快时钟打两拍锁存慢信号）
读空标志：将快的写指针锁存到慢的读时钟域，在锁存之后，写指针可能还在快速变化，但写操作是在写满信号的约束下，不会发生错误。关于读空标志，可能会出现错误，可能出现读空标志出现了，但快速的写又写了一些数据进去，但这在下一次时钟的时候，读空信号又会出现未读空，因此不用担心。
2.快读慢写（读指针变化快，写指针变化慢）
分析和上面一样

Q：两段式状态机和三段式状态机的区别

A：[状态机，从细节出发（一段式、两段式、三段式，moore型、mealy型）-CSDN博客](https://blog.csdn.net/wangkai_2019/article/details/107692192)

Q：FPGA的内部资源有什么？

[从原理的视角，一文彻底弄懂FPGA的查找表（LUT）、CLB_fpga查找表的工作原理-CSDN博客](https://blog.csdn.net/malcolm_110/article/details/107250777)

"FPGA内部逻辑资源.md"

A：可简单分成逻辑资源、互连资源、专用功能资源

逻辑资源最底层是晶体管构成的基本逻辑门和触发器的物理实现。最小的核心可编程单元是LUT（查找表），Xinlinx的FPGA查找表一般设计为6个输入，那么就需要64bit的RAM来存储6个变量所有的可能组合，这个查找表也可以作为两个5输入的查找表使用。在FPGA中，每个5输入的查找表后面有一个触发器，那么6输入的查找表有两个触发器。每四个6输入的查找表加2个触发器以及一个进位加法运算器组成一个slice，两个slice组成一个CLB单元。
slice 又分为SLICEM和SLICEL，M的意思是memory，L的意思是logic，区别是SLICEM除了做查找表用之外，还可以用作RAM，这种叫做分散式RAM单元(Distributed RAM)。除此之外，SLICEM还可以用作移位寄存器，SLICEL只能做查找表用。

互连资源按层次可分为

*   **局部互连 (Local Interconnect):** 连接 CLB 内部 Slice 之间、Slice 内部组件的短距离、低延迟、高扇出连线。
*   **区域互连 (Regional Interconnect / Switch Matrix):** 连接相邻 CLB 行/列、块 RAM、DSP 的中等距离连线。由可编程开关矩阵控制连接。
*   **长线 (Long Lines / Global Interconnect):** 覆盖 FPGA 较长距离（如整个器件宽度/高度）的专用高速连线，用于时钟、高速信号或关键路径。
*   **全局时钟网络 (Global Clock Network):** 专用的、高度对称、低偏斜的树状网络，用于分发时钟信号到所有 CLB、块 RAM、DSP 中的时序元件。

常见的专用功能资源有嵌入式块RAM（BRAM），数字信号处理单元（DSP Slice），时钟管理单元，高速串行收发器，I/O逻辑块等。

![SLICE组成](https://i-blog.csdnimg.cn/blog_migrate/534ad6b17017b847879f955e23098d6d.jpeg#pic_center)

# 禾赛笔试问答整理

Q1：在FPGA中，流水计算一个36bit数据中的1的个数，如何实现，使FPGA的资源消耗速度最小且速度最快？

Q2：输入一组连续的数据流，想对这组连续数据做动态可配置的延时，且最大延时需支持到1000拍，如何实现？

Q3：数据读延时为3的ram，如何将ram的读数据接口与AXI stream接口连接？

Q5：如果一个FPGA工程的时序违例中有很多线延时过大的路径，如何解决该问题？

A5：在动手解决前，**务必先确认问题根源**。线延时过大的常见原因包括：

- **布局分散**：关键逻辑单元（如触发器、LUT）被放置在FPGA的远端，导致布线路径过长。（可以简化逻辑，区域约束）
- **布线拥塞**：局部区域布线资源紧张，工具被迫选择次优路径，增加延迟。
- **高扇出网络**：单个信号驱动过多负载（如复位信号、时钟使能信号），形成“长线”，延迟显著增加。（手动插入缓冲器或寄存器复制）
- **设计规模过大**：整体布局未优化，关键路径跨越多个时钟区域（clock regions）。
- **工具自动布线局限**：综合/实现工具默认策略未针对关键路径优化。

Q6：在FPGA中，当复位的扇出很大时，可以做什么来改善这种情况？

Q7：列举建立时间和保持时间的经典违例？并给出可行的解决办法？

Q8：如何处理单bit跨时钟域、多bit格雷码的跨时钟域？并说明原因？

# 联发科笔试问答整理

Q1：在IC流程中，verification的作用是什么？

A1：确保功能正确、验证时序收敛、验证功耗是否满足、验证物理可实现性、验证可测试性；降低流片风险与成本。

Q2：